<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width,initial-scale=1.0, user-scalable=0" name="viewport"/>
    <meta name="x5-orientation" content="portrait">
    <meta content="yes" name="apple-mobile-web-app-capable"/>
    <meta name="format-detection" content="telphone=no"/>
    <meta content="black" name="apple-mobile-web-app-status-bar-style"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <link rel="stylesheet" type="text/css" href="css/font-awesome.min.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/reset.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/header.css" media="screen"/>
    <link rel="stylesheet" type="text/css" href="css/clear.css" media="screen">
    <link rel="stylesheet" type="text/css" href="css/profile.css" media="screen">
    <style type="text/css">
        #scroll-wrapper {
            position: absolute;
            z-index: 1;
            top: 1.76rem;
            bottom: 0;
            left: 0;
            width: 100%;
            overflow: hidden;
        }
    </style>
    <title>现金券-红包</title>
</head>
<body onload="cashLoad()">
<!--公共头部  微信头部不要加 app头部要加样式需要根据实际情况进行修改且样式均为统一-->
<header>
    <div class="wg-header">
        <a href="" class="btn menu-icon-btn icon-angle-left"></a>
        <h2 class="wg-header-txt txt-center">现金券红包</h2>
        <a href="" class="btn btn-shared"></a>
    </div>
</header>

<!--有现金券状态栏-->
<div class="cash-couple-nav">
    <a href="javascript:void(0);" class="cash-nav-btn p-left active txt-center">全部<span
            class="nav-underline"></span></a>
    <a href="javascript:void(0);" class="cash-nav-btn p-left txt-center">未使用<span class="nav-underline"></span></a>
    <a href="javascript:void(0);" class="cash-nav-btn p-left txt-center">已使用<span class="nav-underline"></span></a>
    <a href="javascript:void(0);" class="cash-nav-btn p-left txt-center">已过期<span class="nav-underline"></span></a>
</div>
<!--cash-couple-nav-->

<!--整体内容滑动-->
<section>
    <div id="scroll-wrapper">
        <div id="scroll-container">
            <!--没有现金券红包状态-->
            <div class="no-cash-couple-state">
                <span class="no-cash-couple-pic">
                    <img src="img/profile-cash-couple.png" class="img-responsive" alt="">
                </span>
                <!--no-cash-couple-pic-->
                <p class="no-cash-couple-label txt-center">店铺红包、店铺优惠券不定期发放</p>
            </div>
            <!--no-cash-couple-state-->
            <!--有现金券状态-->
            <div class="has-cash-couple-state">
                <div class="cash-couple-content-list">
                    <div class="cash-couple-items marginB20">
                        <span class="cash-couple-pic"></span>
                        <div class="cash-couple-intro">
                            <p class="cash-label">注册券</p>
                            <p class="cash-intro">只能在指定的店铺使用,只能在指定的店铺使用,只能在指定的店铺使用,只能在指定的店铺使用,只能在指定的店铺使用</p>
                            <p class="cash-validity">有效日期：2017-02-15至2017-02-24</p>
                            <!-- 券的使用期限 -->
                        <span class="cash-couple-validity validity-cash">
                           <!-- <img lazyImg='现金券图片路径' alt="">-->
                        </span>
                        </div>
                    </div>
                    <!--cash-couple-items-->

                    <div class="cash-couple-items marginB20">
                        <span class="cash-couple-pic"><img lazyImg="img/tx.jpg" class="img-responsive" alt=""></span>
                        <div class="cash-couple-intro">
                            <p class="cash-label">注册券</p>
                            <p class="cash-intro">只能在指定的店铺使用,只能在指定的店铺使用,只能在指定的店铺使用,只能在指定的店铺使用,只能在指定的店铺使用</p>
                            <p class="cash-validity">有效日期：2017-02-15至2017-02-24</p>
                            <!-- 券的使用期限 -->
                        <span class="cash-couple-validity invalidity-cash">
                             <!-- <img lazyImg='现金券图片路径' alt="">-->
                        </span>
                        </div>
                    </div>
                    <!--cash-couple-items-->

                    <div class="cash-couple-items ">
                        <span class="cash-couple-pic"></span>
                        <div class="cash-couple-intro">
                            <p class="cash-label">注册券</p>
                            <p class="cash-intro">只能在指定的店铺使用,只能在指定的店铺使用,只能在指定的店铺使用,只能在指定的店铺使用,只能在指定的店铺使用</p>
                            <p class="cash-validity">有效日期：2017-02-15至2017-02-24</p>
                            <!-- 券的使用期限 -->
                        <span class="cash-couple-validity">

                        </span>
                        </div>
                    </div>
                    <!--cash-couple-items-->

                </div>
                <!--cash-couple-content-list-->
            </div>
            <!--has-cash-couple-state-->
        </div>
    </div>
</section>

<script src="js/size.js" type="text/javascript"></script>
<script src="js/zepto.min.js" type="text/javascript"></script>
<script src="js/TouchScroll.js" type="text/javascript"></script>
<script type="text/javascript">
    var MyScroll = '', flag = true;//flag 临时做判断 具体看后天返回的数据类型
    function cashLoad() {
        //页面元素加载完后，最新IOS上下滑动包裹层
        Myscroll = new IScroll('#scroll-wrapper', {
            click: true,
            touchend: true,
            preventDefaultException: {tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|A|SPAN)$/},
            deceleration: 0.0006,
            bindToWrapper: true,
            scrollbars: true,
            fadeScrollbars: true,
            shrinkScrollbars: 'scale'
        });

        //执行图片懒加载
        ImgLazyLoad();


        /*---  无bug保佑线  ---*/

        if (!flag) {
            $(".no-cash-couple-state").show();
        } else {
            $(".has-cash-couple-state").show();
        }

        /*导航栏*/
        $(".cash-nav-btn").on('touchend', function () {
            $(this).addClass("active").siblings().removeClass("active");
        });


        /*---  无bug保佑线  ---*/

        //绑定上下滑动事件
        Myscroll.on('scrollEnd', function () {
            //滑屏结束执行图片懒加载
            //上拉加载
            //TODO
            Myscroll.refresh();
            ImgLazyLoad();
        });

        //图片懒加载处理
        function ImgLazyLoad() {
            $("img").each(function (i, t) {
                //含有懒加载属性就执行懒加载
                if ($(t).attr('lazyImg')) {
                    //标签含有需要懒加载的图片 执行图片懒加载
                    if ($(t).offset().top <= (Myscroll.wrapperHeight - Myscroll.y)) {
                        $(t).attr('src', $(t).attr('lazyImg'));
                    }
                }
            });
        }

    }


</script>


</body>
</html>